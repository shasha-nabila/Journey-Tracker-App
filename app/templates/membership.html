{% extends 'base.html' %}

{% block title %}Membership Plan{% endblock %}

{% block content %}
<div class="membership-plans">
    <h1>Membership Plan</h1>
    <p>Current Plan: {{ current_plan|capitalize if current_plan else "None" }}</p>
    <div class="plan">
        {% set plan_options = ['weekly', 'monthly', 'yearly'] %}
        {% for plan_option in plan_options %}
        <div class="plan-option">
            <h2>{{ plan_option|capitalize }}</h2>
            <p>Â£{{ "3" if plan_option == 'weekly' else "10" if plan_option == 'monthly' else "100" }}</p>
            {% if current_plan == plan_option %}
            <form action="{{ url_for('main.cancel_plan') }}" method="post">
                <input type="hidden" name="plan" value="{{ plan_option }}">
                <button type="submit">Cancel</button>
            </form>
            {% else %}
                {% if not current_plan %}
                <form action="/subscription" method="get">
                    <input type="hidden" name="plan" value="{{ plan_option }}">
                    <button type="submit">Subscribe</button>
                </form>
                {% else %}  
                <form action="{{ url_for('main.confirm_change_plan') }}" method="post">
                    <input type="hidden" name="new_plan" value="{{ plan_option }}">
                    <input type="hidden" name="current_plan" value="{{ current_plan }}">
                    <button type="submit">Change</button>
                </form>                
                {% endif %}
            {% endif %}            
        </div>
        {% endfor %}        
    </div>
</div>
<script>
    function confirmChange() {
        return confirm('Do you want to cancel your current plan?');
    }
</script>
{% endblock %}
